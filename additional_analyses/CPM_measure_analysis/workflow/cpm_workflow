import subprocess

#TMPDIR = os.environ.get("TMPDIR", "/tmp")
#SRCDIR = os.environ.get("SRCDIR", "src")
#CONFIG = os.environ.get("CONFIG", "config_normalNode.json")
#DBPATH = os.environ.get("DBPATH", "/mnt/nfs/projects/ecosystem_biology/local_tools/IMP/dependencies/prokka/db")
#
#configfile: CONFIG
#
#MEMCORE = os.environ.get("MEMCORE", config['memory_per_core_gb'])
#THREADS = os.environ.get("THREADS", config['threads'])
#MEMTOTAL = os.environ.get("MEMTOTAL", config['memory_total_gb'])

## Define input directories
# Nucmer results (from metaQUAST)
NUCMER_RES = "/scratch/users/snarayanasamy/IMP_MS_data/metaquast_analysis/SM/combined_reference/contigs_reports/nucmer_output"

# metaQUAST table results
MQ_RES = "/scratch/users/snarayanasamy/IMP_MS_data/metaquast_analysis/SM/combined_reference/contigs_reports/nucmer_output"


## Define samples
ASSMS = [ 'IMP', 'IMP-megahit', 'IMP_MG', 'IMP_MT', 'MetAmos_MG', 'MetAmos_MGMT', 'MOCAT_MG', 'MOCAT_MGMT' ]

## Define output directory
OUTDIR = os.environ.get("OUTDIR", "/scratch/users/snarayanasamy/IMP_MS_data/metaquast_analysis/CPM_analysis")

workdir:
    OUTDIR

include:
    '../rules/process_nucmer.rule'

#include:
#    '../rules/find_AL.rule'
#
rule CPM_ALL:
    input:
       expand("{assm}.processed.coords.filtered", assm=ASSMS),
       #expand("{assm}.processed.coords.filtered_AL", assm=ASSMS)
    output:
       touch('cpm.done')
